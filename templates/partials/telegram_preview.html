<div class="tg-wrap" style="--w:{{ width|default:'360px' }}" data-theme="{{ theme|default:'dark' }}">
  {% if media %}
    {% with media|length as count %}
      {% if count == 1 %}
        <div class="tg-media">
          {% include "partials/telegram_media_item.html" with item=media.0 %}
        </div>
      {% elif count == 2 %}
        <div class="tg-album two">
          {% for item in media %}
            <div class="tg-album__item">
              {% include "partials/telegram_media_item.html" with item=item %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="tg-album many">
          <div class="tg-album__item large">
            {% include "partials/telegram_media_item.html" with item=media.0 classes="large" %}
          </div>
          {% for item in media|slice:"1:" %}
            <div class="tg-album__item">
              {% include "partials/telegram_media_item.html" with item=item %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  {% endif %}
  <div class="tg-text">{{ text }}</div>
</div>
