{% extends "admin/change_list.html" %}
{% load static admin_list %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'admin/post_cards.css' %}">
{% endblock %}

{% block object-tools-items %}
  {{ block.super }}
  {% if has_add_permission %}
    {% if gpt_article_url %}
      <li><a href="{{ gpt_article_url }}" class="addlink">Dodaj z GPT</a></li>
    {% elif opts.app_label == 'posts' and opts.model_name == 'draftpost' %}
      <li><a href="{% url 'admin:posts_draftpost_gpt_article' %}" class="addlink">Dodaj z GPT</a></li>
    {% endif %}
    {% if draft_import_url %}
      <li><a href="{{ draft_import_url }}" class="historylink">Importuj z JSON</a></li>
    {% elif opts.app_label == 'posts' and opts.model_name == 'draftpost' %}
      <li><a href="{% url 'admin:posts_draftpost_import_json' %}" class="historylink">Importuj z JSON</a></li>
    {% endif %}
  {% endif %}
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <script src="{% static 'admin/post_cards.js' %}" defer></script>
{% endblock %}

{% block result_list %}
  {% if action_form and actions_on_top and cl.show_admin_actions %}{% admin_actions %}{% endif %}
  <div class="results">
    {% if cl.formset %}
      {{ cl.formset.management_form }}
    {% endif %}
    {% include "admin/posts/includes/post_card_grid.html" %}
    <div class="post-delete-modal" data-post-delete-modal hidden>
      <div class="post-delete-modal__backdrop" data-post-delete-dismiss></div>
      <div class="post-delete-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="post-delete-modal-title">
        <div class="post-delete-modal__content">
          <h2 id="post-delete-modal-title" class="post-delete-modal__title">Potwierdź usunięcie</h2>
          <p class="post-delete-modal__description">
            Czy na pewno chcesz usunąć <strong data-post-delete-object>wybrany wpis</strong>? Tej operacji nie można cofnąć.
          </p>
          <p class="post-delete-modal__error" data-post-delete-error hidden aria-live="assertive"></p>
          <div class="post-delete-modal__actions">
            <button type="button" class="post-delete-modal__button" data-post-delete-cancel>Anuluj</button>
            <button type="button" class="post-delete-modal__button post-delete-modal__button--danger" data-post-delete-confirm>Usuń</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% if action_form and actions_on_bottom and cl.show_admin_actions %}{% admin_actions %}{% endif %}
{% endblock %}

{% block filters %}
  {% if session_filters_remembered %}
    <div class="changelist-filter-actions">
      <a href="?_clear_session_filters=1" class="button">Wyczyść zapamiętane filtry</a>
    </div>
  {% endif %}
  {{ block.super }}
{% endblock %}
